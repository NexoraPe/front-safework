<mat-card class="incident-card" [class]="'status-' + incident.status.toLowerCase()">

    <mat-card-header>
        <mat-chip-listbox class="status-chip">
            <mat-chip-option [color]="getStatusColor(incident.status)" selected>
                {{ incident.status }}
            </mat-chip-option>
        </mat-chip-listbox>

        <mat-card-title>{{ incident.title }}</mat-card-title>
        <mat-card-subtitle>ID: #{{ incident.id }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
        <p class="description">{{ incident.description }}</p>

        <div class="meta-info">
            <p><strong>Location:</strong> {{ incident.location }}</p>

            <p><strong>Created By:</strong> {{ incident.reporterName }}</p>

            @if (incident.assigneeName) {
            <p><strong>Assigned To:</strong> {{ incident.assigneeName }}</p>
            }
        </div>
    </mat-card-content>

    <mat-card-actions align="end">
        @if (incident.documentUrl) {
        <button mat-stroked-button color="primary" (click)="openDocument()">
            <mat-icon>description</mat-icon> View File
        </button>
        }

        @if (canAssign()) {
        <button mat-flat-button color="primary" (click)="assignToMe.emit(incident.id)">
            Assign to Me
        </button>
        }

        <button mat-flat-button color="accent" (click)="updateStatus.emit(incident.id)">
            Update
        </button>

        <button mat-stroked-button (click)="viewDetails.emit(incident.id)">
            View Details
        </button>
    </mat-card-actions>
</mat-card>